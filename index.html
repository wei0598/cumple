<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Fiesta de Cumple - Simon & Denis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    html, body {
      height: 100%;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #000000; /* åˆå§‹é»‘å¹• */
      color: #222222;
    }

    /* å½©è‰²èƒŒæ™¯çœŸæ­£æ˜¯åœ¨ canvas é‡Œç”»ï¼Œbody åªç®¡é»‘ or éé»‘ */
    body.started {
      background: linear-gradient(135deg, #ffeef5, #e8f6ff);
    }

    canvas {
      position: fixed;
      inset: 0;
      display: block;
      z-index: 0;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.8s ease-out;
    }
    body.started canvas {
      opacity: 1;
    }

    .center-card {
      position: relative;
      z-index: 1;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(15px) scale(0.96);
      transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }
    body.started .center-card {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0) scale(1);
    }

    .card {
      padding: 28px 32px 20px;
      border-radius: 20px;
      background: #ffffff;
      border: 1px solid rgba(0, 0, 0, 0.05);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.12);
      text-align: center;
      max-width: 520px;
      width: 100%;
    }

    .title {
      font-size: 2.4rem;
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      margin-bottom: 10px;
      background: linear-gradient(120deg, #ff7b93, #ffb347, #5c9dff);
      -webkit-background-clip: text;
      color: transparent;
    }

    .subtitle {
      font-size: 1.4rem;
      margin-bottom: 16px;
      color: #444444;
    }

    .logo-row {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-bottom: 18px;
      flex-wrap: wrap;
    }

    .logo-row img {
      display: block;
      max-height: 90px;
      border-radius: 14px;
      background: #000;
      object-fit: contain;
    }

    .names {
      font-size: 1.1rem;
      margin-bottom: 14px;
      color: #333333;
    }

    .pill {
      display: inline-block;
      padding: 8px 18px;
      border-radius: 999px;
      background: #fff5d7;
      border: 1px solid #ffd36b;
      font-size: 1.05rem;
      margin-bottom: 10px;
      color: #704c00;
    }

    .info {
      font-size: 1.05rem;
      margin-bottom: 12px;
      color: #333333;
    }

    .small {
      font-size: 0.95rem;
      color: #666666;
      line-height: 1.5;
    }

    .btn-row {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 14px 0 10px;
      flex-wrap: wrap;
    }

    .btn {
      padding: 9px 18px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 1rem;
      text-decoration: none;
      border: none;
      transition: 0.15s;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
    }

    .btn-wa {
      background: #25d366;
      color: #ffffff;
      box-shadow: 0 6px 16px rgba(37, 211, 102, 0.4);
    }

    .btn-wa:hover {
      transform: translateY(-1px);
      box-shadow: 0 9px 22px rgba(37, 211, 102, 0.55);
    }

    .music-hint {
      margin-top: 10px;
      font-size: 0.95rem;
      color: #aa5500;
    }

    /* å…¨å±é»‘å¹• + ç‚¹å‡»æˆ‘æŒ‰é’® */
    .overlay {
      position: fixed;
      inset: 0;
      background: #000000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: #ffffff;
      text-align: center;
      transition: opacity 0.6s ease-out, visibility 0.6s ease-out;
    }
    .overlay.hide {
      opacity: 0;
      visibility: hidden;
    }

    .overlay-title {
      font-size: 1.4rem;
      margin-bottom: 20px;
    }

    .start-btn {
      padding: 14px 32px;
      border-radius: 999px;
      border: 2px solid #ffffff;
      background: transparent;
      color: #ffffff;
      font-size: 1.3rem;
      cursor: pointer;
      text-align: center;
      animation: pulse 1.2s infinite ease-in-out;
    }

    .start-sub {
      margin-top: 12px;
      font-size: 0.95rem;
      opacity: 0.8;
    }

    @keyframes pulse {
      0%   { transform: scale(1);   box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
      70%  { transform: scale(1.08); box-shadow: 0 0 0 16px rgba(255,255,255,0); }
      100% { transform: scale(1);   box-shadow: 0 0 0 0 rgba(255,255,255,0); }
    }

    @media (max-width: 480px) {
      .card {
        padding: 20px 16px 16px;
      }
      .title {
        font-size: 2.0rem;
      }
      .subtitle {
        font-size: 1.3rem;
      }
      .logo-row img {
        max-height: 80px;
      }
      .info, .names, .pill {
        font-size: 1.0rem;
      }
      .small, .music-hint, .overlay-title, .start-sub {
        font-size: 0.9rem;
      }
      .start-btn {
        font-size: 1.15rem;
        padding: 12px 26px;
      }
    }
  </style>
</head>
<body>

<!-- é»‘å¹• + ç‚¹å‡»æŒ‰é’® -->
<div class="overlay" id="startOverlay">
  <div class="overlay-title">ğŸ‚ Lista la invitaciÃ³n, tocÃ¡ para entrar</div>
  <button class="start-btn" id="startBtn">ç‚¹å‡»æˆ‘ Â· TocÃ¡ acÃ¡</button>
  <div class="start-sub">Se va a abrir la tarjeta con mÃºsica de cumpleaÃ±os.</div>
</div>

<canvas id="bg"></canvas>

<div class="center-card">
  <div class="card">
    <div class="title">Â¡Fiesta de cumple!</div>
    <div class="subtitle">Simon y Denis te invitan ğŸ‰</div>

    <div class="logo-row">
      <img src="simon.jpg" alt="Simon">
      <img src="denis.jpg" alt="Denis">
    </div>

    <div class="names">
      Simon Huang Â· 12 aÃ±os<br>
      Denis Huang Â· 9 aÃ±os
    </div>

    <div class="pill">
      Domingo 8 de diciembre Â· 14:00 a 17:00 hs
    </div>

    <div class="info">
      Quinta Urbina, Henderson<br>
      Aire libre, juegos, merienda rica y mucha buena onda.
    </div>

    <div class="btn-row">
      <a class="btn btn-wa"
         href="https://wa.me/5492314532328?text=Hola%2C%20confirmamos%20para%20la%20fiesta%20de%20Simon%20y%20Denis"
         target="_blank">
        ğŸ’¬ Confirmar por WhatsApp
      </a>
    </div>

    <div class="small">
      Si llueve, la fiesta se hace igual en la quinta.<br>
      AvisÃ¡ si el/la chico/a tiene alguna alergia alimentaria.
    </div>

    <div class="music-hint" id="musicHint">
      ğŸµ La canciÃ³n de cumpleaÃ±os empieza sola despuÃ©s de tocar el botÃ³n.
    </div>
  </div>
</div>

<script>
/* ---------- æ˜äº®æ°”çƒ + å½©çº¸èƒŒæ™¯åŠ¨ç”» ---------- */
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
let W, H;

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

function rand(a,b){ return Math.random()*(b-a)+a; }

const colors = ['#ff8ba7', '#ffd36b', '#5c9dff', '#9ae6b4', '#ffb3ef'];

let balloons = [];
let confetti = [];
let bursts = [];

for (let i=0;i<18;i++) {
  balloons.push({
    x: rand(-50,W+50),
    y: rand(H*0.3,H+120),
    r: rand(30,44),
    vy: rand(-0.5,-1.0),
    sway: rand(0.4,0.9),
    off: rand(0,Math.PI*2),
    color: colors[(Math.random()*colors.length)|0]
  });
}

for (let i=0;i<80;i++) {
  confetti.push({
    x: rand(0,W),
    y: rand(-H*0.5,H),
    w: rand(3,6),
    h: rand(8,16),
    vy: rand(0.7,1.6),
    rot: rand(0,6.28),
    vr: rand(-0.05,0.05),
    color: colors[(Math.random()*colors.length)|0]
  });
}

function burst(x,y) {
  for (let i=0;i<26;i++) {
    const a = rand(0,6.28);
    const s = rand(1.5,3.5);
    bursts.push({
      x, y,
      vx: Math.cos(a)*s,
      vy: Math.sin(a)*s,
      life: 1,
      size: rand(3,6),
      color: colors[(Math.random()*colors.length)|0]
    });
  }
}

canvas.addEventListener('click', e => {
  if (!document.body.classList.contains('started')) return;
  burst(e.clientX, e.clientY);
});
canvas.addEventListener('touchstart', e => {
  if (!document.body.classList.contains('started')) return;
  const t = e.touches[0];
  burst(t.clientX, t.clientY);
}, {passive:true});

function draw() {
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0,'#ffeef5');
  g.addColorStop(1,'#e8f6ff');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  confetti.forEach(c => {
    c.y += c.vy;
    c.rot += c.vr;
    if (c.y > H+20) {
      c.y = rand(-H*0.4,-20);
      c.x = rand(0,W);
    }
    ctx.save();
    ctx.translate(c.x,c.y);
    ctx.rotate(c.rot);
    ctx.fillStyle = c.color;
    ctx.fillRect(-c.w/2,-c.h/2,c.w,c.h);
    ctx.restore();
  });

  const t = Date.now()*0.001;
  balloons.forEach(b => {
    b.y += b.vy;
    b.x += Math.sin(t + b.off)*b.sway;
    if (b.y < -60) {
      b.y = H + rand(40,140);
      b.x = rand(-50,W+50);
    }
    ctx.save();
    ctx.translate(b.x,b.y);
    ctx.beginPath();
    ctx.ellipse(0,0,b.r*0.75,b.r,0,0,Math.PI*2);
    const gg = ctx.createRadialGradient(-b.r*0.25,-b.r*0.45,b.r*0.2,0,0,b.r);
    gg.addColorStop(0,'#ffffff');
    gg.addColorStop(0.2,b.color);
    gg.addColorStop(1,'rgba(0,0,0,0.2)');
    ctx.fillStyle = gg;
    ctx.fill();

    ctx.beginPath();
    ctx.moveTo(-4,b.r*0.7);
    ctx.lineTo(4,b.r*0.7);
    ctx.lineTo(0,b.r*0.95);
    ctx.closePath();
    ctx.fillStyle = b.color;
    ctx.fill();

    ctx.strokeStyle = 'rgba(120,120,120,0.8)';
    ctx.lineWidth = 1;
    ctx.beginPath();
    ctx.moveTo(0,b.r*0.95);
    ctx.bezierCurveTo(3,b.r*1.4,-3,b.r*1.9,2,b.r*2.4);
    ctx.stroke();

    ctx.restore();
  });

  for (let i=bursts.length-1;i>=0;i--) {
    const p = bursts[i];
    p.x += p.vx;
    p.y += p.vy;
    p.vy += 0.05;
    p.life -= 0.03;
    ctx.globalAlpha = p.life;
    ctx.fillStyle = p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.fill();
    ctx.globalAlpha = 1;
    if (p.life <= 0) bursts.splice(i,1);
  }

  requestAnimationFrame(draw);
}
draw();

/* ---------- ç”Ÿæ—¥å¿«ä¹éŸ³ä¹ï¼šç‚¹å‡»æŒ‰é’®åå¼€å§‹å¾ªç¯ ---------- */

let audioCtx = null;
let musicLooping = false;

const bpm = 150;
const melody = [
  [262,1], [262,1], [294,2], [262,2], [349,2], [330,4],
  [262,1], [262,1], [294,2], [262,2], [392,2], [349,4],
  [262,1], [262,1], [523,2], [440,2], [349,2], [330,2], [294,3],
  [466,1], [466,1], [440,2], [349,2], [392,2], [349,4]
];

const totalBeats = melody.reduce((s,m)=>s+m[1],0);
const beatDur = 60 / bpm;

function scheduleMelodyOnce() {
  if (!audioCtx) return;
  let t = audioCtx.currentTime + 0.05;

  melody.forEach(([freq, beats]) => {
    const dur = beats * beatDur;
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();

    osc.type = "triangle";
    osc.frequency.value = freq;

    gain.gain.setValueAtTime(0.0, t);
    gain.gain.linearRampToValueAtTime(0.45, t + 0.03);
    gain.gain.exponentialRampToValueAtTime(0.001, t + dur * 0.9);

    osc.connect(gain).connect(audioCtx.destination);
    osc.start(t);
    osc.stop(t + dur);

    t += dur;
  });
}

function startMusicLoop() {
  if (musicLooping) return;

  const AC = window.AudioContext || window.webkitAudioContext;
  if (!AC) return;

  if (!audioCtx) {
    audioCtx = new AC();
  }

  audioCtx.resume().then(() => {
    musicLooping = true;

    const hint = document.getElementById('musicHint');
    if (hint) {
      hint.textContent = 'ğŸ¶ CanciÃ³n de cumpleaÃ±os sonando en bucle.';
    }

    function loop() {
      if (!musicLooping || !audioCtx || audioCtx.state !== 'running') return;
      scheduleMelodyOnce();
      const totalMs = totalBeats * beatDur * 1000 + 600;
      setTimeout(loop, totalMs);
    }

    scheduleMelodyOnce();
    const totalMs = totalBeats * beatDur * 1000 + 600;
    setTimeout(loop, totalMs);
  }).catch(() => {
    // å¦‚æœå¤±è´¥ï¼Œå°±ç­‰ä¸‹æ¬¡ç‚¹æŒ‰é’®å†è¯•
    musicLooping = false;
  });
}

/* ---------- ç‚¹å‡»ã€Œç‚¹å‡»æˆ‘ / TocÃ¡ acÃ¡ã€æŒ‰é’®ï¼šé»‘å¹•æ¶ˆå¤± + é¡µé¢å±•å¼€ + éŸ³ä¹å¯åŠ¨ ---------- */

const startBtn = document.getElementById('startBtn');
const startOverlay = document.getElementById('startOverlay');

startBtn.addEventListener('click', () => {
  // å±•å¼€é¡µé¢
  document.body.classList.add('started');
  startOverlay.classList.add('hide');
  setTimeout(() => {
    startOverlay.style.display = 'none';
  }, 700);

  // å¯åŠ¨éŸ³ä¹å¾ªç¯
  startMusicLoop();
});
</script>

</body>
</html>
